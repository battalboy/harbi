================================================================================
HARBI - ERROR MESSAGES REFERENCE
================================================================================

This document lists all possible connection errors that may occur in event_create
scripts and their corresponding human-readable Turkish error messages.

================================================================================
1. HTTP STATUS CODE ERRORS
================================================================================

400 - Bad Request
Technical: Server cannot process the request due to invalid syntax
Turkish: âŒ HATA: Ä°stek formatÄ± hatalÄ±. API parametreleri kontrol edilmeli.

401 - Unauthorized
Technical: Authentication failed or credentials invalid
Turkish: âŒ HATA: Izinsiz baÄŸlantÄ±. API anahtarÄ± veya kimlik bilgileri geÃ§ersiz.

403 - Forbidden
Technical: Server refuses to authorize the request
Turkish: âŒ HATA: EriÅŸim engellendi. Ban yemiÅŸ olabiliriz.

404 - Not Found
Technical: Requested resource does not exist
Turkish: âŒ HATA: Ä°stenen sayfa bulunamadÄ±. API endpoint'i deÄŸiÅŸmiÅŸ olabilir.

429 - Too Many Requests
Technical: Rate limit exceeded
Turkish: âŒ HATA: Ã‡ok fazla istek gÃ¶nderildi. Ban yemiÅŸ olabiliriz.

500 - Internal Server Error
Technical: Server encountered an unexpected condition
Turkish: âŒ HATA: Sitenin sunucusunda bir hata oluÅŸtu. Site tarafÄ±nda sorun var.

502 - Bad Gateway
Technical: Invalid response from upstream server
Turkish: âŒ HATA: Sunucu geÃ§idi hatasÄ±. Site geÃ§ici olarak eriÅŸilemez durumda.

503 - Service Unavailable
Technical: Server temporarily unavailable (maintenance or overload)
Turkish: âŒ HATA: Servis ÅŸu anda kullanÄ±lamÄ±yor. Site bakÄ±mda veya aÅŸÄ±rÄ± yÃ¼klÃ¼ olabilir.

504 - Gateway Timeout
Technical: Upstream server did not respond in time
Turkish: âŒ HATA: Sunucu zaman aÅŸÄ±mÄ±na uÄŸradÄ±. Site yanÄ±t vermiyor.

================================================================================
2. NETWORK/CONNECTION ERRORS
================================================================================

ConnectionError
Technical: Cannot establish connection to server
Turkish: âŒ HATA: Siteye baÄŸlanÄ±lamÄ±yor. Ä°nternet baÄŸlantÄ±nÄ±zÄ± kontrol edin veya site Ã§evrimdÄ±ÅŸÄ± olabilir.

ConnectionRefusedError
Technical: Server actively refused the connection
Turkish: âŒ HATA: Sunucu baÄŸlantÄ±yÄ± reddetti. Site eriÅŸimi engelliyor olabilir.

ConnectionResetError
Technical: Connection forcibly closed by remote host
Turkish: âŒ HATA: BaÄŸlantÄ± sunucu tarafÄ±ndan kesildi. VPN/Proxy ayarlarÄ±nÄ± kontrol edin.

Timeout
Technical: Request exceeded time limit (default 30 seconds)
Turkish: âŒ HATA: Ä°stek zaman aÅŸÄ±mÄ±na uÄŸradÄ± (30 saniye). Site Ã§ok yavaÅŸ yanÄ±t veriyor veya eriÅŸilemiyor.

ReadTimeout
Technical: Server did not send data in the allotted time
Turkish: âŒ HATA: Veri okuma zaman aÅŸÄ±mÄ±na uÄŸradÄ±. Site yanÄ±t vermiyor.

ConnectTimeout
Technical: Connection could not be established in time
Turkish: âŒ HATA: BaÄŸlantÄ± kurma zaman aÅŸÄ±mÄ±na uÄŸradÄ±. Site eriÅŸilemiyor.

DNSLookupError
Technical: Failed to resolve domain name to IP address
Turkish: âŒ HATA: Site adÄ± Ã§Ã¶zÃ¼mlenemedi (DNS hatasÄ±). Ä°nternet baÄŸlantÄ±nÄ±zÄ± veya DNS ayarlarÄ±nÄ±zÄ± kontrol edin.

SSLError
Technical: SSL/TLS certificate validation failed
Turkish: âŒ HATA: SSL sertifika hatasÄ±. Site gÃ¼venlik sertifikasÄ± geÃ§ersiz veya sÃ¼resi dolmuÅŸ.

ProxyError
Technical: Failed to connect through proxy server
Turkish: âŒ HATA: Proxy baÄŸlantÄ±sÄ± baÅŸarÄ±sÄ±z. VPN/Gluetun container'Ä± Ã§alÄ±ÅŸÄ±yor mu kontrol edin.

TooManyRedirects
Technical: Exceeded maximum number of HTTP redirects
Turkish: âŒ HATA: Ã‡ok fazla yÃ¶nlendirme. Site yapÄ±landÄ±rmasÄ± hatalÄ±.

================================================================================
3. RESPONSE/DATA ERRORS
================================================================================

EmptyResponse
Technical: HTTP 200 OK but response body is empty
Turkish: âš ï¸ UYARI: Site yanÄ±t verdi ama iÃ§erik boÅŸ. MaÃ§ ya da takÄ±m verisi bulunamadÄ±.

InvalidJSON
Technical: Response content is not valid JSON
Turkish: âŒ HATA: GeÃ§ersiz veri formatÄ±. Site beklenmeyen bir yanÄ±t gÃ¶nderdi.

JSONDecodeError
Technical: Cannot parse response as JSON
Turkish: âŒ HATA: JSON Ã§Ã¶zÃ¼mleme hatasÄ±. Site'nin API yanÄ±tÄ± bozuk.

MissingField
Technical: Expected data field not present in response
Turkish: âŒ HATA: Gerekli veri alanÄ± eksik. API yapÄ±sÄ± deÄŸiÅŸmiÅŸ olabilir.

InvalidDataStructure
Technical: Response structure differs from expected format
Turkish: âŒ HATA: Veri yapÄ±sÄ± beklenenden farklÄ±. API gÃ¼ncellenmiÅŸ olabilir, yazÄ±lÄ±m gÃ¼ncellemese gerekebilir.

NoEventsFound
Technical: Valid response but zero events in data
Turkish: â„¹ï¸ BÄ°LGÄ°: BaÄŸlantÄ± baÅŸarÄ±lÄ± ama aktif maÃ§ bulunamadÄ± (0 etkinlik).

EncodingError
Technical: Character encoding/decoding failed
Turkish: âŒ HATA: Karakter kodlama hatasÄ±. TÃ¼rkÃ§e karakterler dÃ¼zgÃ¼n okunamÄ±yor.

================================================================================
4. VPN/GEOBLOCKING ERRORS
================================================================================

GeoblockDetected
Technical: Site returns geoblocking error page
Turkish: âŒ HATA: Site coÄŸrafi kÄ±sÄ±tlama uyguluyor. VPN'i kontrol edin.

VPNNotRunning
Technical: Proxy connection refused (VPN not active)
Turkish: âŒ HATA: VPN baÄŸlantÄ±sÄ± yok. Gluetun container'larÄ± baÅŸlatÄ±n.

WrongVPNLocation
Technical: Connected but wrong geographic location
Turkish: âš ï¸ UYARI: YanlÄ±ÅŸ VPN konumu. Stake iÃ§in Kanada, Stoiximan iÃ§in Yunanistan gerekli.

CloudflareChallenge
Technical: Cloudflare bot protection activated
Turkish: âŒ HATA: Cloudflare korumasÄ± algÄ±landÄ±. Manuel tarayÄ±cÄ± mÃ¼dahalesi gerekebilir.

================================================================================
5. BROWSER AUTOMATION ERRORS (Stake.com specific)
================================================================================

ChromeNotFound
Technical: Chrome/Chromium browser not installed
Turkish: âŒ HATA: Chrome tarayÄ±cÄ± bulunamadÄ±. Chromium kurulumu gerekli: `sudo apt install chromium-browser`

ChromeDriverError
Technical: Selenium Chrome driver failed to start
Turkish: âŒ HATA: Chrome driver hatasÄ±. TarayÄ±cÄ± baÅŸlatÄ±lamadÄ±.

ElementNotFound
Technical: Selenium cannot locate specified DOM element
Turkish: âŒ HATA: Sayfa Ã¶ÄŸesi bulunamadÄ±. Site yapÄ±sÄ± deÄŸiÅŸmiÅŸ olabilir, script gÃ¼ncelleme gerekli.

PageLoadTimeout
Technical: Browser page load exceeded timeout
Turkish: âŒ HATA: Sayfa yÃ¼kleme zaman aÅŸÄ±mÄ±. Site Ã§ok yavaÅŸ veya eriÅŸilemiyor.

StaleElementError
Technical: DOM element changed or removed during access
Turkish: âŒ HATA: Sayfa Ã¶ÄŸesi deÄŸiÅŸti. Dinamik iÃ§erik yeniden yÃ¼klendi.

================================================================================
6. IP BAN / AUTOMATED ACCESS DETECTION INDICATORS
================================================================================

This section identifies which errors could indicate that your IP has been banned
or your automated access has been detected by the betting sites.

ğŸ”´ HIGH PROBABILITY - Direct IP Ban Indicators:
------------------------------------------------

403 - Forbidden
- **MOST COMMON IP BAN SIGNAL**
- Server knows who you are but actively refuses your request
- Often accompanied by messages like "Access Denied" or "Forbidden"
- If you get this after normal operation, likely banned

429 - Too Many Requests
- **Rate limit exceeded** - temporary ban that could become permanent
- If you keep hitting this, it may escalate to a permanent IP ban
- Usually has a `Retry-After` header indicating cooldown period
- **WARNING**: Stop script immediately if you see this repeatedly

CloudflareChallenge
- **Bot detection** - Cloudflare has identified automated access patterns
- Your requests look "non-human" (too fast, no browser fingerprint, etc.)
- Could escalate to CAPTCHA requirement or IP ban
- Common with browser automation (Stake.com)

ğŸŸ¡ MEDIUM PROBABILITY - Possible Ban Indicators:
------------------------------------------------

401 - Unauthorized
- **Could be API key ban** rather than IP ban
- If API requires authentication and repeatedly fails, they might ban the key or IP
- Less common for IP bans, more for credential issues

ConnectionRefusedError
- **Firewall blocking** - server actively rejects connection from your IP
- Could indicate you're on a blacklist at the network level
- Often combined with rate limiting or abuse detection

ConnectionResetError
- **Forcible disconnection** - server cuts connection mid-request
- Could indicate IP is being actively blocked
- Often seen when trying to reconnect after a ban

ğŸŸ¢ LOW PROBABILITY - Unlikely to Be Ban:
---------------------------------------

GeoblockDetected
- Primarily for **geographic restrictions**, not abuse detection
- Could theoretically be used to block "suspicious" IPs
- Usually VPN location issue, not a ban

500/502/503/504 Server Errors
- These are **server-side problems**, not client bans
- Not related to your IP or behavior
- Site infrastructure issues

Timeout/DNS/SSL Errors
- **Network infrastructure issues**, not bans
- These would affect everyone, not just you

WARNING SIGNS YOUR IP MIGHT BE BANNED:
---------------------------------------

1. **403 errors after period of normal operation** â†’ Strong indicator
2. **429 errors that never reset** â†’ Rate limit escalated to ban
3. **Cloudflare challenges that always fail** â†’ Bot detection + possible ban
4. **Sudden ConnectionRefused after working fine** â†’ Firewall block

WHAT TO DO IF YOU SUSPECT IP BAN:
----------------------------------

IMMEDIATE ACTIONS:
1. **STOP ALL REQUESTS IMMEDIATELY**
   - Don't keep retrying - this makes it worse!
   - Comment out the script or kill the process

2. **Test from different IP (VPN)**
   - If it works from VPN, your original IP is likely banned
   - Try switching VPN countries or restarting VPN container

3. **Check if VPN/proxy is working**
   Command: curl -x http://127.0.0.1:8889 https://ipinfo.io/ip
   - Should show VPN IP, not your real IP

4. **Wait before retrying**
   - Wait at least 1 hour for temporary bans
   - Wait 24 hours for more serious blocks
   - Use exponential backoff: 1h â†’ 6h â†’ 24h

PREVENTION STRATEGIES:
----------------------

1. **Add request delays** (2-5 seconds between calls)
   Code: time.sleep(random.uniform(2, 5))

2. **Use exponential backoff** when retrying failed requests
   Code: time.sleep(2 ** attempt)  # 2s, 4s, 8s, 16s...

3. **Respect 429 errors** - wait the specified time in Retry-After header
   Code: retry_after = response.headers.get('Retry-After', 60)

4. **Cache responses** - don't request same data repeatedly
   - Store API responses locally
   - Check cache before making new requests

5. **Use browser user-agent headers** to look less "bot-like"
   Code: headers = {'User-Agent': 'Mozilla/5.0 ...'}

6. **Limit request frequency**
   - Max 1 request per 2-3 seconds per site
   - Spread requests across time instead of bulk fetching

7. **Monitor response patterns**
   - If you start seeing more errors than usual, slow down
   - If you see 429, stop immediately and wait

MOST LIKELY SCENARIO FOR THIS PROJECT:
---------------------------------------

For betting site APIs (Oddswar, Roobet, Stoiximan, Tumbet, Stake):

- **403** = Most likely IP ban indicator
- **429** = Rate limiting (warning sign - stop immediately)
- **CloudflareChallenge** = Automated access detected (especially Stake.com)

**CRITICAL**: If you start seeing 403s or persistent 429s, **STOP THE SCRIPT
IMMEDIATELY** and wait at least 1 hour before retrying with delays added.

For Stake.com (browser automation):
- More sensitive to bot detection
- Use random delays between page loads
- Rotate VPN IPs if possible
- Consider manual intervention for CAPTCHA

================================================================================
SITE-SPECIFIC VPN REQUIREMENTS
================================================================================

Stake.com:
- VPN Required: YES
- Country: Canada (Kanada)
- Gluetun Container: docker-canada.yaml
- Proxy Port: 8889
- Command: sudo docker-compose -f docker-canada.yaml up -d

Stoiximan:
- VPN Required: YES (when outside Greece)
- Country: Greece (Yunanistan)
- Gluetun Container: docker-greece.yaml
- Proxy Port: 8888
- Command: sudo docker-compose -f docker-greece.yaml up -d

Roobet:
- VPN Required: NO (API accessible globally)
- API: Betby (sptpub.com)

Tumbet:
- VPN Required: NO (API accessible globally)
- API: SportWide (analytics-sp.googleserv.tech)
- Note: Website requires Turkish VPN, but API does not

Oddswar:
- VPN Required: NO (API accessible globally)

================================================================================
USAGE NOTES
================================================================================

1. All error messages use Turkish for client-facing display
2. Technical descriptions in English for developer reference
3. Error symbols:
   âŒ = Critical error (operation failed)
   âš ï¸ = Warning (operation succeeded with issues)
   â„¹ï¸ = Information (operation succeeded, but note this)

4. When implementing error handling:
   - Catch specific exceptions first, then general ones
   - Log technical details to file (English)
   - Display user-friendly messages (Turkish)
   - Include actionable steps when possible

5. VPN-related errors should:
   - Identify which site requires VPN
   - Specify correct country/location
   - Provide docker command to start VPN

================================================================================
END OF DOCUMENT
================================================================================
